{"version":3,"sources":["webpack:////Users/jeff/work/hjhlwx1/main.js","webpack:////Users/jeff/work/hjhlwx1/pages/settlement/settlement.vue?e69e","webpack:////Users/jeff/work/hjhlwx1/pages/settlement/settlement.vue?b50f","webpack:////Users/jeff/work/hjhlwx1/pages/settlement/settlement.vue?34c8","webpack:////Users/jeff/work/hjhlwx1/pages/settlement/settlement.vue?04c0","webpack:////Users/jeff/work/hjhlwx1/pages/settlement/settlement.vue","webpack:////Users/jeff/work/hjhlwx1/pages/settlement/settlement.vue?6dc0","webpack:////Users/jeff/work/hjhlwx1/pages/settlement/settlement.vue?bae4"],"names":["createPage","Page","that","data","region","ycode","start","title","flag","total","discount","service","butBol","userName","address","total_demand","selectedCare","hotel_name","onLoad","options","undefined","getApp","globalData","selectedService","shoppingCart","date_from","products","product","name","otherMember","lastname","firstname","bindData","methods","bindSubmit","id","uni","showToast","image","showModal","content","success","res","confirm","callWxPayment","cancel","console","log","associations","cart_summary","cartSummary","Number","total_discounts","total_price","length","wx_payment_info","prepay_id","nonce_str","timeStamp","Date","getTime","toString","nonceStr","appid","appId","wx_pay_key","paySign","cj","MD5","toUpperCase","wx","requestPayment","paymentCallBack","showCancel","confirmColor","wxPaymentCode","wx_out_trade_no","param","id_cart","id_customer","customer","total_paid","total_paid_real","wx_code","API","createOrder","response","hideLoading","duration","switchTab","url"],"mappings":"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","file":"pages/settlement/settlement.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'            \nimport Page from './pages/settlement/settlement.vue'\ncreatePage(Page)","import { render, staticRenderFns } from \"./settlement.vue?vue&type=template&id=f42b52a0&\"\nimport script from \"./settlement.vue?vue&type=script&lang=js&\"\nexport * from \"./settlement.vue?vue&type=script&lang=js&\"\nimport style0 from \"./settlement.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('f42b52a0', component.options)\n    } else {\n      api.reload('f42b52a0', component.options)\n    }\n    module.hot.accept(\"./settlement.vue?vue&type=template&id=f42b52a0&\", function () {\n      api.rerender('f42b52a0', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Users/jeff/work/hjhlwx1/pages/settlement/settlement.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./settlement.vue?vue&type=template&id=f42b52a0&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./settlement.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./settlement.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport API from '@/common/api.js';\nimport Util from '@/common/util.js';\nimport cj from '../../node_modules/crypto-js/crypto-js.js'\n\n\nlet that;\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tregion: '',\n\t\t\tycode: '',\n\t\t\tstart: '',\n\t\t\ttitle: '',\n\t\t\tflag: true,\n\t\t\ttotal: 0,\n\t\t\tdiscount: 0,\n\t\t\tservice: '',\n\t\t\tbutBol: false,\n\t\t\tuserName: '',\n\t\t\taddress: '',\n\t\t\ttotal_demand: 0,\n\t\t\tselectedCare: {\n\t\t\t\thotel_name: ''\n\t\t\t}\n\t\t}\n\t},\n\tonLoad: function(options) {\n\t\tthat = this;\n\t\tif (undefined != options.butBol) {\n\t\t\tthat.butBol = false;\n\t\t}\n\t\tthat.region = options.region;\n\t\tthat.ycode = options.ycode;\n\t\tthat.title = options.title;\n\t\tthat.address = options.address;\n\n\t\tthis.selectedCare = getApp().globalData.selectedService;\n\t\t// get saved shopping cart\n\t\tlet shoppingCart = getApp().globalData.shoppingCart;\n\n\t\t// show data\n\t\tthat.start = shoppingCart.date_from;\n\t\tthis.service = '';\n\t\tfor(let product of shoppingCart.products){\n\t\t\tthis.service += ' ' + product.name;\n\t\t}\n\t\t\n\t\tthis.userName = shoppingCart.otherMember.lastname + ' ' + shoppingCart.otherMember.firstname;\n\n\t\t// create or update shopping cart\n\t\tthis.bindData(shoppingCart);\n\n\t},\n\tmethods: {\n\t\tbindSubmit: function() {\n\t\t\tlet shoppingCart = getApp().globalData.shoppingCart;\n\t\t\t////TODO: 验证购物车\n\t\t\tif(shoppingCart.id === null){\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: \"购物车无效\",\n\t\t\t\t\timage: \"../../static/info-icon.png\"\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '确认支付',\n\t\t\t\tcontent: '总价:' + this.total + '元,是否提交订单？',\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\tthis.callWxPayment(shoppingCart);\n\t\t\t\t\t} else if (res.cancel) {\n\t\t\t\t\t\tconsole.log('用户点击取消');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tbindData: function(shoppingCart) {\n\t\t\t\n\n\t\t\tif (shoppingCart.id && shoppingCart.id > 0 && shoppingCart.associations && shoppingCart.associations.cart_summary) {\n\t\t\t\t// bind data\n\t\t\t\tlet total_demand = 0;\n\t\t\t\tlet discount = 0;\n\t\t\t\tlet total = 0;\n\t\t\t\tfor (let cartSummary of shoppingCart.associations.cart_summary) {\n\t\t\t\t\ttotal_demand += Number(cartSummary.total_demand);\n\t\t\t\t\tdiscount += Number(cartSummary.total_discounts);\n\t\t\t\t\ttotal += Number(cartSummary.total_price);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.total_demand = total_demand;\n\t\t\t\tthis.discount = discount;\n\t\t\t\tthis.total = total;\n\t\t\t\t\n\t\t\t\tthis.butBol = true;\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\t// update shopping cart id\n\t\t\t\tgetApp().globalData.shoppingCart.id = null;\n\t\t\t\tthis.butBol = false;\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: \"订单错误请重试\",\n\t\t\t\t\timage: \"../../static/info-icon.png\"\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tcallWxPayment: function(shoppingCart){\n\t\t\t// 挂起微信支付服务\n\t\t\tif(shoppingCart \n\t\t\t\t&& shoppingCart.associations \n\t\t\t\t&& shoppingCart.associations.cart_summary \n\t\t\t\t&& shoppingCart.associations.cart_summary.length > 0\n\t\t\t\t&& shoppingCart.associations.cart_summary[0].wx_payment_info\n\t\t\t\t&& shoppingCart.associations.cart_summary[0].wx_payment_info.prepay_id\n\t\t\t\t&& shoppingCart.associations.cart_summary[0].wx_payment_info.nonce_str)\n\t\t\t\t{\n\t\t\t\t\tlet timeStamp = new Date().getTime().toString();\n\t\t\t\t\tlet nonceStr = shoppingCart.associations.cart_summary[0].wx_payment_info.nonce_str;\n\t\t\t\t\tlet prepay_id = shoppingCart.associations.cart_summary[0].wx_payment_info.prepay_id;\n\t\t\t\t\tlet appid = getApp().globalData.appId;\n\t\t\t\t\tlet wx_pay_key = getApp().globalData.wx_pay_key;\n\t\t\t\t\t\n\t\t\t\t\tlet paySign = cj.MD5('appId='+ appid +'&nonceStr='+ nonceStr +'&package=prepay_id='+ prepay_id +'&signType=MD5&timeStamp='+ timeStamp +'&key=' + wx_pay_key);\n\t\t\t\t\tpaySign = paySign.toString().toUpperCase();\n\t\t\t\t\tif(Number(this.total) > 0){\n\t\t\t\t\t\twx.requestPayment(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t'timeStamp': timeStamp, //时间戳从1970年1月1日00:00:00至今的秒数,即当前的时间\n\t\t\t\t\t\t\t'nonceStr': nonceStr, //随机字符串，长度为32个字符以下。\n\t\t\t\t\t\t\t'package': 'prepay_id=' + prepay_id, //统一下单接口返回的 prepay_id 参数值\n\t\t\t\t\t\t\t'signType': 'MD5',\n\t\t\t\t\t\t\t'paySign': paySign,\n\t\t\t\t\t\t\t'success':(res) => {\n\t\t\t\t\t\t\t\t//TODO: 支付成功 将购物车生成订单\n\t\t\t\t\t\t\t\tthis.paymentCallBack(shoppingCart);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'fail':(res) => {\n\t\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\t    title: '提示',\n\t\t\t\t\t\t\t\t    content: '支付失败请重试！',\n\t\t\t\t\t\t\t\t\tshowCancel:false,\n\t\t\t\t\t\t\t\t\tconfirmColor:'#07c160'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}else{\n\t\t\t\t\t\t//TODO: 支付成功 将购物车生成订单\n\t\t\t\t\t\tthis.paymentCallBack(shoppingCart);\n\t\t\t\t\t}\n\t\t\t\t}else {\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t    title: '提示',\n\t\t\t\t\t    content: '支付失败请重试！',\n\t\t\t\t\t\tshowCancel:false,\n\t\t\t\t\t\tconfirmColor:'#07c160'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t},\n\t\tpaymentCallBack: function(shoppingCart){\n\t\t\tlet wxPaymentCode = 'wx';\n\t\t\t\n\t\t\tif(shoppingCart\n\t\t\t\t&& shoppingCart.associations \n\t\t\t\t&& shoppingCart.associations.cart_summary \n\t\t\t\t&& shoppingCart.associations.cart_summary.length > 0\n\t\t\t\t&& shoppingCart.associations.cart_summary[0].wx_out_trade_no){\n\t\t\t\t\twxPaymentCode +=  shoppingCart.associations.cart_summary[0].wx_out_trade_no;\n\t\t\t\t}\n\t\t\t// set data\n\t\t\tlet param = {\n\t\t\t\tid_cart: shoppingCart.id,\n\t\t\t\tid_customer: shoppingCart.customer.id,\n\t\t\t\ttotal_paid: this.total,\n\t\t\t\ttotal_paid_real: this.total,\n\t\t\t\twx_code: wxPaymentCode\n\t\t\t};\n\t\t\t// create order\n\t\t\tAPI.createOrder((response) => {\n\t\t\t\tuni.hideLoading();\t\t\t\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t// clear shopping cart\n\t\t\t\tgetApp().globalData.shoppingCart.id = null;\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: \"提交成功\",\n\t\t\t\t\timage: \"../../static/info-icon.png\",\n\t\t\t\t\tduration:3000,\n\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\t// back to order page\n\t\t\t\t\t\twx.switchTab({\n\t\t\t\t\t\t\turl: '/pages/order/order'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}, param);\n\t\t}\n\t}\n}\n","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./settlement.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./settlement.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}