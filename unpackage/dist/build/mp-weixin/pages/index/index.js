(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"002b":function(e,t,a){"use strict";a.r(t);var n=a("72c6"),i=a.n(n);for(var s in n)"default"!==s&&function(e){a.d(t,e,function(){return n[e]})}(s);t["default"]=i.a},6895:function(e,t,a){"use strict";var n=a("a5d9"),i=a.n(n);i.a},"72c6":function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("a096"));i(a("3680"));function i(e){return e&&e.__esModule?e:{default:e}}var s,o=function(){return a.e("components/uni-popup/uni-popup").then(a.bind(null,"15d8"))},r={components:{uniPopup:o},data:function(){return{}},onLoad:function(){var t=this;s=this,n.default.getArea(function(a){e.hideLoading();var n=a.data.htl_room_type_global_demands;n&&n.length>0&&(getApp().globalData.regions=n),t.loadMainServices()},{display:"full",output_format:"JSON"})},methods:{open:function(){this.$refs.popup.open()},close:function(){this.$refs.popup.close()},getuserinfo:function(t){t.detail.iv?e.login({provider:"weixin",success:function(e){var t=e.code;s.getCustom(t),wx.getUserInfo({success:function(e){getApp().globalData.nickName=e.userInfo.nickName}})}}):e.showToast({title:"登陆失败",image:"../../static/info-icon.png"})},getCustom:function(t){n.default.getCustomer(function(t){if(void 0!==t.data.customers){var a=t.data.customers;getApp().globalData.isNewUser=!1;var n=a[0];if(n.address1=n.address,n.id_address=n.id,n.relationship=0,getApp().globalData.users[0]=s.addUsers(n),void 0!==n.associations)for(var i=n.associations.otherMembers,o=0;o<i.length;o++){var r=s.addUsers(i[o]);getApp().globalData.users.push(r)}e.switchTab({url:"/pages/main/main"})}else setTimeout(function(){e.switchTab({url:"/pages/userList/userList"})},2e3)},{display:"full","filter[user_name]":"["+t+"]","filter[login_type]":"1"})},appWxLogin:function(){e.showLoading({title:"加载中",mask:!0}),e.getProvider({service:"oauth",success:function(t){~t.provider.indexOf("weixin")?e.login({provider:"weixin",success:function(t){e.showModal({title:"提示",content:JSON.stringify(t),success:function(e){e.confirm&&s.getCustom(t.code)}})},fail:function(t){e.showModal({title:"提示",content:"登陆失败,"+JSON.stringify(t.errMsg),success:function(e){}})}}):e.showToast({title:"微信服务商不存在",image:"../../static/info-icon.png"})},fail:function(){e.showToast({title:"登陆失败",image:"../../static/info-icon.png"})}})},addUsers:function(e){var t={id:e.id_address,lastname:e.lastname,firstname:e.firstname,sexes:0,birthDate:e.birthday,phone:e.phone,regions:0,address:e.address1,occupation:e.occupation,livings:0,flats:0,diseases:0,scares:0,ifs:[!1,!1,!1,!1,!1,!1,!1,!1],otherTxt:"",relationship:0},a=e.id_gender;2==a&&(t.sexes=1);for(var n=getApp().globalData.livings,i=0,s=0;s<n.length;s++)e.living_status==n[s]&&(i=s);t.livings=i;for(var o=getApp().globalData.flats,r=0,l=0;l<o.length;l++)e.home_type==o[l]&&(r=l);t.flats=r;for(var u=getApp().globalData.diseases,c=0,f=0;f<u.length;f++)e.health_status==u[f]&&(c=f);t.diseases=c;for(var d=getApp().globalData.scares,p=0,g=0;g<d.length;g++)e.special_care==d[g]&&(p=g);t.scares=p;var h=getApp().globalData.ifs,v=[];null!=e.special_care_detail&&(v=e.special_care_detail.split(","));for(var m=0;m<h.length;m++)for(var b=0;b<v.length;b++)v[b]==h[m].name&&(t.ifs[m]=!0,v[b]="");for(var _="",w=0;w<v.length;w++)""!=v[w]&&(_=v[w]);t.otherTxt=_;for(var A=getApp().globalData.regions,x=0,D=0;D<A.length;D++)e.id_global_demand==A[D].id&&(x=D);t.regions=x;var y=e.relationship;return y="兄弟"==y?1:"姐妹"==y?2:"儿女"==y?3:"夫妻"==y?4:0,t.relationship=y,t},loadMainServices:function(){n.default.getMainServiceAndAvailableTimeList(function(t){e.hideLoading();var a=t.data.hotels;a&&a.length>0&&(getApp().globalData.services=a)},{display:"full",output_format:"JSON"})},backHome:function(){e.switchTab({url:"/pages/main/main"})}}};t.default=r}).call(this,a("543d")["default"])},"7c9c":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c},i=[];a.d(t,"a",function(){return n}),a.d(t,"b",function(){return i})},a5d9:function(e,t,a){},b114:function(e,t,a){"use strict";(function(e){a("faf8"),a("921b");n(a("66fd"));var t=n(a("ca28"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("543d")["createPage"])},ca28:function(e,t,a){"use strict";a.r(t);var n=a("7c9c"),i=a("002b");for(var s in i)"default"!==s&&function(e){a.d(t,e,function(){return i[e]})}(s);a("6895");var o=a("2877"),r=Object(o["a"])(i["default"],n["a"],n["b"],!1,null,null,null);t["default"]=r.exports}},[["b114","common/runtime","common/vendor"]]]);